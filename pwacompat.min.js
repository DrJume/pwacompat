(function(){function y(){var a=document.head.querySelector('link[rel="manifest"]'),b=a?a.href:"";if(!b)throw'can\'t find <link rel="manifest" href=".." />\'';var d=G([b,window.location]),e=new XMLHttpRequest;e.open("GET",b);e.withCredentials="use-credentials"===a.getAttribute("crossorigin");e.onload=function(){try{var l=JSON.parse(e.responseText);H(l,d)}catch(r){console.warn("PWACompat error",r)}};e.send(null)}function G(a){for(var b={},d=0;d<a.length;b={c:b.c},++d){b.c=a[d];try{return new URL("",
b.c),function(e){return function(l){return(new URL(l||"",e.c)).toString()}}(b)}catch(e){}}return function(e){return e||""}}function w(a,b){a=document.createElement(a);for(var d in b)a.setAttribute(d,b[d]);document.head.appendChild(a);return a}function g(a,b){b&&(!0===b&&(b="yes"),w("meta",{name:a,content:b}))}function H(a,b){function d(c,h,f){var n=c.width,m=c.height;c=window.devicePixelRatio;var k=x({width:n*c,height:m*c});k.scale(c,c);k.fillStyle=a.background_color||"#f8f9fa";k.fillRect(0,0,n,m);
k.translate(n/2,(m-32)/2);f&&(m=f.width/c,c=f.height/c,128<c&&(m/=c/128,c=128),48<=m&&48<=c&&(k.drawImage(f,m/-2,c/-2,m,c),k.translate(0,c/2+32)));k.fillStyle=I?"white":"black";k.font="24px HelveticaNeue-CondensedBold";f=a.name||a.short_name||document.title;c=k.measureText(f).width;if(c<.8*n)k.fillText(f,c/-2,0);else for(f=f.split(/\s+/g),c=1;c<=f.length;++c){m=f.slice(0,c).join(" ");var z=k.measureText(m).width;if(c===f.length||z>.6*n)k.fillText(m,z/-2,0),k.translate(0,24*1.2),f.splice(0,c),c=0}return function(){var t=
document.createElement("link");t.setAttribute("rel","apple-touch-startup-image");t.setAttribute("media","(orientation: "+h+")");t.setAttribute("href",k.canvas.toDataURL());return t}}function e(c){var h=d(window.screen,"portrait",c),f=d({width:window.screen.height,height:window.screen.width},"landscape",c);window.setTimeout(function(){document.head.appendChild(h());window.setTimeout(function(){document.head.appendChild(f())},10)},10)}var l=a.icons||[];l.sort(function(c,h){return parseInt(h.sizes,10)-
parseInt(c.sizes,10)});var r=l.map(function(c){var h={rel:"icon",href:b(c.src),sizes:c.sizes};w("link",h);if(!(120>parseInt(c.sizes,10)))return h.rel="apple-touch-icon",h}).filter(Boolean);r.forEach(function(c,h){h===r.length-1&&delete c.sizes;w("link",c)});var q=document.head.querySelector('meta[name="viewport"]'),J=!!(q&&q.content||"").match(/\bviewport-fit\s*=\s*cover\b/),v=a.display;q=-1!==K.indexOf(v);g("mobile-web-app-capable",q);L(a.theme_color||"black",J);M&&(g("application-name",a.short_name),
g("msapplication-tooltip",a.description),g("msapplication-starturl",b(a.start_url||".")),g("msapplication-navbutton-color",a.theme_color),(l=l[0])&&g("msapplication-TileImage",b(l.src)),g("msapplication-TileColor",a.background_color));document.head.querySelector('[name="theme-color"]')||g("theme-color",a.theme_color);if(u){var I=A(a.background_color||"#f8f9fa");(v=N(a.related_applications))&&g("apple-itunes-app","app-id="+v);g("apple-mobile-web-app-capable",q);g("apple-mobile-web-app-title",a.short_name||
a.name);var B=appleTouchIcons[0],p=new Image;p.crossOrigin="anonymous";p.onerror=function(){e()};if(appleTouchIcons.length)p.onload=function(){e(p);if(a.background_color){var c=C(p,a.background_color);c&&(B.href=c,appleTouchIcons.slice(1).forEach(function(h){var f=new Image;f.crossOrigin="anonymous";f.onload=function(){var n=C(f,a.background_color,!0);h.href=n};f.src=h.href}))}},p.src=B.href;else p.onerror()}else l={por:"portrait",lan:"landscape"}[String(a.orientation||"").substr(0,3)]||"",g("x5-orientation",
l),g("screen-orientation",l),"fullscreen"===v?(g("x5-fullscreen","true"),g("full-screen","yes")):q&&(g("x5-page-mode","app"),g("browsermode","application"))}function N(a){var b;(a||[]).filter(function(d){return"itunes"===d.platform}).forEach(function(d){d.id?b=d.id:(d=d.url.match(/id(\d+)/))&&(b=d[1])});return b}function L(a,b){if(u||O){var d=A(a);if(u)g("apple-mobile-web-app-status-bar-style",b?"black-translucent":d?"black":"default");else{a:{try{var e=Windows.UI.ViewManagement.ApplicationView.getForCurrentView().titleBar;
break a}catch(l){}e=void 0}if(b=e)b.foregroundColor=D(d?"black":"white"),b.backgroundColor=D(a)}}}function D(a){a=E(a);return{r:a[0],g:a[1],b:a[2],a:a[3]}}function E(a){var b=x();b.fillStyle=a;b.fillRect(0,0,1,1);return b.getImageData(0,0,1,1).data}function A(a){a=E(a).map(function(b){b/=255;return.03928>b?b/12.92:Math.pow((b+.055)/1.055,2.4)});return 3<Math.abs(1.05/(.2126*a[0]+.7152*a[1]+.0722*a[2]+.05))}function C(a,b,d){d=void 0===d?!1:d;var e=x(a);e.drawImage(a,0,0);if(d||255!==e.getImageData(0,
0,1,1).data[3])return e.globalCompositeOperation="destination-over",e.fillStyle=b,e.fillRect(0,0,a.width,a.height),e.canvas.toDataURL()}function x(a){a=void 0===a?{width:1,height:1}:a;var b=a.height,d=document.createElement("canvas");d.width=a.width;d.height=b;return d.getContext("2d")}if("onload"in XMLHttpRequest.prototype&&!navigator.f){var K=["standalone","fullscreen","minimal-ui"],F=navigator.userAgent||"",u=navigator.vendor&&-1!==navigator.vendor.indexOf("Apple")&&-1!==F.indexOf("Mobile/"),M=
!!F.match(/(MSIE |Edge\/|Trident\/)/),O="undefined"!==typeof Windows;"complete"===document.readyState?y():window.addEventListener("load",y)}})();
